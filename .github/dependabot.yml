# Dependabot — auraxis-app
# Atualiza automaticamente dependências npm e GitHub Actions.
# Auto-merge é habilitado via label "auto-merge" + branch protection rule:
#   Settings → Branches → master → "Allow auto-merge" = on
#   + "Require status checks to pass before merging" = ci-passed

version: 2

updates:
  # ── npm dependencies ───────────────────────────────────────────────────
  - package-ecosystem: npm
    directory: /
    schedule:
      interval: weekly
      day: monday
      time: "09:00"
      timezone: America/Sao_Paulo
    open-pull-requests-limit: 10
    groups:
      # Agrupa todas as atualizações de patch em um único PR
      patch-updates:
        update-types:
          - patch
      # Agrupa devDependencies de minor em um único PR
      dev-minor-updates:
        dependency-type: development
        update-types:
          - minor
      # Expo ecosystem — minor e patch juntos
      expo-ecosystem:
        patterns:
          - expo
          - "expo-*"
          - "@expo/*"
        update-types:
          - minor
          - patch
      # React Native ecosystem
      react-native-ecosystem:
        patterns:
          - react-native
          - "react-native-*"
          - "@react-navigation/*"
        update-types:
          - minor
          - patch
    labels:
      - dependencies
      - auto-merge
    commit-message:
      prefix: chore
      prefix-development: chore
      include: scope
    ignore:
      # Ignorar major versions — exigem revisão manual
      - dependency-name: "*"
        update-types:
          - version-update:semver-major
      # React e React Native: só patch (minor pode quebrar RN)
      - dependency-name: react
        update-types:
          - version-update:semver-minor
      - dependency-name: react-native
        update-types:
          - version-update:semver-minor

  # ── GitHub Actions ─────────────────────────────────────────────────────
  - package-ecosystem: github-actions
    directory: /
    schedule:
      interval: weekly
      day: monday
      time: "09:00"
      timezone: America/Sao_Paulo
    open-pull-requests-limit: 5
    labels:
      - dependencies
      - github-actions
      - auto-merge
    commit-message:
      prefix: chore
      include: scope
